================================================================================
          H∆Ø·ªöNG D·∫™N C√ÄI ƒê·∫∂T V√Ä S·ª¨ D·ª§NG H·ªÜ TH·ªêNG KI·ªÇM SO√ÅT RA V√ÄO T√íA NH√Ä
                        (Access Control Building System)
================================================================================

M·ª§C L·ª§C
1. Y√™u c·∫ßu h·ªá th·ªëng
2. C√†i ƒë·∫∑t Backend (Node.js + Express + MySQL)
3. C√†i ƒë·∫∑t Frontend (Next.js + React)
4. C·∫•u h√¨nh Database
5. C·∫•u h√¨nh MQTT (T√πy ch·ªçn)
6. Ch·∫°y ·ª©ng d·ª•ng
7. T√†i kho·∫£n m·∫∑c ƒë·ªãnh
8. H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng c√°c ch·ª©c nƒÉng ch√≠nh
9. X·ª≠ l√Ω l·ªói th∆∞·ªùng g·∫∑p

================================================================================
1. Y√äU C·∫¶U H·ªÜ TH·ªêNG
================================================================================

Ph·∫ßn m·ªÅm c·∫ßn thi·∫øt:
- Node.js: phi√™n b·∫£n 18.x tr·ªü l√™n
- MySQL: phi√™n b·∫£n 8.0 tr·ªü l√™n
- npm ho·∫∑c yarn
- Tr√¨nh duy·ªát web hi·ªán ƒë·∫°i (Chrome, Firefox, Edge)

Ki·∫øn th·ª©c:
- C∆° b·∫£n v·ªÅ d√≤ng l·ªánh (Command Line)
- C∆° b·∫£n v·ªÅ MySQL/Database
- Hi·ªÉu bi·∫øt v·ªÅ REST API (T√πy ch·ªçn)

================================================================================
2. C√ÄI ƒê·∫∂T BACKEND (NODE.JS + EXPRESS + MYSQL)
================================================================================

B∆Ø·ªöC 1: C√†i ƒë·∫∑t Node.js
------------------------
1. Truy c·∫≠p: https://nodejs.org/
2. T·∫£i v√† c√†i ƒë·∫∑t phi√™n b·∫£n LTS (Long Term Support)
3. Ki·ªÉm tra c√†i ƒë·∫∑t th√†nh c√¥ng:
   - M·ªü Command Prompt (CMD) ho·∫∑c Terminal
   - Ch·∫°y l·ªánh: node --version
   - Ch·∫°y l·ªánh: npm --version

B∆Ø·ªöC 2: C√†i ƒë·∫∑t MySQL
----------------------
1. Truy c·∫≠p: https://dev.mysql.com/downloads/mysql/
2. T·∫£i v√† c√†i ƒë·∫∑t MySQL Community Server
3. Ghi nh·ªõ th√¥ng tin:
   - Username: root (m·∫∑c ƒë·ªãnh)
   - Password: (m·∫≠t kh·∫©u b·∫°n ƒë·∫∑t khi c√†i)
   - Port: 3306 (m·∫∑c ƒë·ªãnh)

B∆Ø·ªöC 3: C√†i ƒë·∫∑t c√°c package Backend
------------------------------------
1. M·ªü Command Prompt
2. Di chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c backend:
   cd E:\ƒê·ªí √ÅN\Access-Control-Building-\backend

3. C√†i ƒë·∫∑t c√°c dependencies:
   npm install

   C√°c package s·∫Ω ƒë∆∞·ª£c c√†i:
   - express: Web framework
   - mysql2: MySQL driver
   - bcryptjs: M√£ h√≥a m·∫≠t kh·∫©u
   - jsonwebtoken: JWT authentication
   - cors: Cross-Origin Resource Sharing
   - dotenv: Qu·∫£n l√Ω bi·∫øn m√¥i tr∆∞·ªùng
   - mqtt: MQTT client cho IoT
   - node-cron: Scheduled tasks

B∆Ø·ªöC 4: C·∫•u h√¨nh bi·∫øn m√¥i tr∆∞·ªùng Backend
-----------------------------------------
1. T·∫°o file .env trong th∆∞ m·ª•c backend:
   cd E:\ƒê·ªí √ÅN\Access-Control-Building-\backend
   notepad .env

2. Th√™m n·ªôi dung sau (ch·ªânh s·ª≠a theo c·∫•u h√¨nh c·ªßa b·∫°n):

# Database Configuration
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_mysql_password_here
DB_NAME=access_control

# Server Configuration
PORT=5000
NODE_ENV=development

# JWT Configuration
JWT_SECRET=your_secret_key_here_change_in_production
JWT_EXPIRE=7d

# MQTT Configuration (T√πy ch·ªçn - n·∫øu d√πng thi·∫øt b·ªã IoT)
MQTT_BROKER=mqtt://localhost:1883
MQTT_USERNAME=
MQTT_PASSWORD=

3. L∆∞u file (Ctrl + S)

L∆ØU √ù: Thay th·∫ø c√°c gi√° tr·ªã sau:
- your_mysql_password_here: M·∫≠t kh·∫©u MySQL c·ªßa b·∫°n
- your_secret_key_here: Chu·ªói b√≠ m·∫≠t cho JWT (d√†i √≠t nh·∫•t 32 k√Ω t·ª±)

================================================================================
3. C√ÄI ƒê·∫∂T FRONTEND (NEXT.JS + REACT)
================================================================================

B∆Ø·ªöC 1: C√†i ƒë·∫∑t c√°c package Frontend
-------------------------------------
1. M·ªü Command Prompt m·ªõi
2. Di chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c frontend:
   cd E:\ƒê·ªí √ÅN\Access-Control-Building-\frontend

3. C√†i ƒë·∫∑t c√°c dependencies:
   npm install

   C√°c package s·∫Ω ƒë∆∞·ª£c c√†i:
   - next: React framework
   - react: UI library
   - react-dom: React rendering
   - axios: HTTP client
   - zustand: State management
   - tailwindcss: CSS framework
   - qrcode.react: QR code generator
   - @yudiel/react-qr-scanner: QR scanner
   - mqtt: MQTT client
   - lucide-react: Icon library
   - react-hot-toast: Notifications

B∆Ø·ªöC 2: C·∫•u h√¨nh bi·∫øn m√¥i tr∆∞·ªùng Frontend
------------------------------------------
1. T·∫°o file .env.local trong th∆∞ m·ª•c frontend:
   cd E:\ƒê·ªí √ÅN\Access-Control-Building-\frontend
   notepad .env.local

2. Th√™m n·ªôi dung sau:

# API Configuration
NEXT_PUBLIC_API_URL=http://localhost:5000/api

# MQTT Configuration (T√πy ch·ªçn)
NEXT_PUBLIC_MQTT_BROKER=ws://localhost:9001
NEXT_PUBLIC_MQTT_USERNAME=
NEXT_PUBLIC_MQTT_PASSWORD=

3. L∆∞u file

================================================================================
4. C·∫§U H√åNH DATABASE
================================================================================

B∆Ø·ªöC 1: T·∫°o Database
---------------------
1. M·ªü MySQL Workbench ho·∫∑c Command Line MySQL
2. ƒêƒÉng nh·∫≠p MySQL:
   mysql -u root -p
   (Nh·∫≠p m·∫≠t kh·∫©u khi ƒë∆∞·ª£c h·ªèi)

3. T·∫°o database:
   CREATE DATABASE access_control CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

4. Ch·ªçn database:
   USE access_control;

B∆Ø·ªöC 2: Import Schema v√† Data
------------------------------
1. N·∫øu d√πng MySQL Workbench:
   - File > Open SQL Script
   - Ch·ªçn file: E:\ƒê·ªí √ÅN\Access-Control-Building-\schemma.sql
   - Click Execute (‚ö° icon)

2. N·∫øu d√πng Command Line:
   mysql -u root -p access_control < "E:\ƒê·ªí √ÅN\Access-Control-Building-\schemma.sql"

B∆Ø·ªöC 3: Ki·ªÉm tra Database
--------------------------
1. Ki·ªÉm tra c√°c b·∫£ng ƒë√£ ƒë∆∞·ª£c t·∫°o:
   SHOW TABLES;

   K·∫øt qu·∫£ ph·∫£i c√≥ 9 b·∫£ng:
   - users
   - departments
   - cards
   - doors
   - permissions
   - permission_doors
   - card_permissions
   - access_logs
   - visitor

2. Ki·ªÉm tra d·ªØ li·ªáu m·∫´u (n·∫øu c√≥):
   SELECT * FROM users LIMIT 5;

================================================================================
5. C·∫§U H√åNH MQTT (T√ôY CH·ªåN - CHO THI·∫æT B·ªä IOT)
================================================================================

N·∫øu b·∫°n kh√¥ng d√πng thi·∫øt b·ªã IoT th·ª±c t·∫ø, c√≥ th·ªÉ b·ªè qua ph·∫ßn n√†y.

B∆Ø·ªöC 1: C√†i ƒë·∫∑t Mosquitto MQTT Broker
--------------------------------------
1. Truy c·∫≠p: https://mosquitto.org/download/
2. T·∫£i v√† c√†i ƒë·∫∑t Mosquitto cho Windows
3. Kh·ªüi ƒë·ªông d·ªãch v·ª• Mosquitto:
   net start mosquitto

B∆Ø·ªöC 2: C·∫•u h√¨nh Mosquitto
---------------------------
1. M·ªü file c·∫•u h√¨nh:
   C:\Program Files\mosquitto\mosquitto.conf

2. Th√™m ho·∫∑c s·ª≠a c√°c d√≤ng sau:
   listener 1883
   listener 9001
   protocol websockets
   allow_anonymous true

3. Kh·ªüi ƒë·ªông l·∫°i Mosquitto:
   net stop mosquitto
   net start mosquitto

================================================================================
6. CH·∫†Y ·ª®NG D·ª§NG
================================================================================

B∆Ø·ªöC 1: Ch·∫°y Backend Server
----------------------------
1. M·ªü Command Prompt
2. Di chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c backend:
   cd E:\ƒê·ªí √ÅN\Access-Control-Building-\backend

3. Ch·∫°y l·ªánh:
   # Ch·∫°y m√¥i tr∆∞·ªùng development (t·ª± ƒë·ªông reload khi c√≥ thay ƒë·ªïi)
   npm run dev

   # Ho·∫∑c ch·∫°y m√¥i tr∆∞·ªùng production
   npm start

4. Ki·ªÉm tra console, b·∫°n s·∫Ω th·∫•y:
   ‚úì K·∫øt n·ªëi database th√†nh c√¥ng
      Host: localhost
      Database: access_control
   ‚úì Server ƒëang ch·∫°y t·∫°i http://localhost:5000

B∆Ø·ªöC 2: Ch·∫°y Frontend Server
-----------------------------
1. M·ªü Command Prompt M·ªöI (gi·ªØ nguy√™n terminal backend)
2. Di chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c frontend:
   cd E:\ƒê·ªí √ÅN\Access-Control-Building-\frontend

3. Ch·∫°y l·ªánh:
   # Ch·∫°y m√¥i tr∆∞·ªùng development
   npm run dev

   # Ho·∫∑c build v√† ch·∫°y production
   npm run build
   npm start

4. ·ª®ng d·ª•ng s·∫Ω ch·∫°y t·∫°i: http://localhost:3000

B∆Ø·ªöC 3: Truy c·∫≠p ·ª©ng d·ª•ng
--------------------------
1. M·ªü tr√¨nh duy·ªát web
2. Truy c·∫≠p: http://localhost:3000
3. ƒêƒÉng nh·∫≠p b·∫±ng t√†i kho·∫£n m·∫∑c ƒë·ªãnh (xem m·ª•c 7)

================================================================================
7. T√ÄI KHO·∫¢N M·∫∂C ƒê·ªäNH
================================================================================

Sau khi import database, b·∫°n c√≥ th·ªÉ t·∫°o t√†i kho·∫£n Admin ƒë·∫ßu ti√™n:

T√†i kho·∫£n Admin:
- Email: admin@example.com
- M·∫≠t kh·∫©u: Admin@123
- Role: admin
- Employee ID: EMP001

T√†i kho·∫£n Security:
- Email: security@example.com
- M·∫≠t kh·∫©u: Security@123
- Role: security
- Employee ID: EMP002

T√†i kho·∫£n Employee:
- Email: employee@example.com
- M·∫≠t kh·∫©u: Employee@123
- Role: employee
- Employee ID: EMP003

L∆ØU √ù:
- ƒê·ªïi m·∫≠t kh·∫©u ngay sau khi ƒëƒÉng nh·∫≠p l·∫ßn ƒë·∫ßu
- M·∫≠t kh·∫©u ƒë∆∞·ª£c m√£ h√≥a b·∫±ng bcrypt

================================================================================
8. H∆Ø·ªöNG D·∫™N S·ª¨ D·ª§NG C√ÅC CH·ª®C NƒÇNG CH√çNH
================================================================================

8.1. ƒêƒÇNG NH·∫¨P H·ªÜ TH·ªêNG
------------------------
1. Truy c·∫≠p: http://localhost:3000/login
2. Nh·∫≠p email v√† m·∫≠t kh·∫©u
3. Click "ƒêƒÉng nh·∫≠p"
4. H·ªá th·ªëng s·∫Ω chuy·ªÉn ƒë·∫øn Dashboard t∆∞∆°ng ·ª©ng v·ªõi role

8.2. QU·∫¢N L√ù NG∆Ø·ªúI D√ôNG (ADMIN)
--------------------------------
A. Th√™m ng∆∞·ªùi d√πng m·ªõi:
   1. V√†o menu: Qu·∫£n l√Ω > Ng∆∞·ªùi d√πng
   2. Click "Th√™m ng∆∞·ªùi d√πng"
   3. ƒêi·ªÅn th√¥ng tin:
      - Employee ID (m√£ nh√¢n vi√™n)
      - Email
      - M·∫≠t kh·∫©u
      - H·ªç t√™n
      - S·ªë ƒëi·ªán tho·∫°i
      - Ph√≤ng ban
      - V·ªã tr√≠: staff/manager/director
      - Role: admin/security/employee
   4. Ch·ª•p ·∫£nh ho·∫∑c upload avatar (t√πy ch·ªçn)
   5. Click "L∆∞u"

B. S·ª≠a th√¥ng tin ng∆∞·ªùi d√πng:
   1. Click v√†o ng∆∞·ªùi d√πng c·∫ßn s·ª≠a
   2. Click "Ch·ªânh s·ª≠a"
   3. Thay ƒë·ªïi th√¥ng tin
   4. Click "C·∫≠p nh·∫≠t"

C. V√¥ hi·ªáu h√≥a ng∆∞·ªùi d√πng:
   1. Click v√†o ng∆∞·ªùi d√πng
   2. Click "V√¥ hi·ªáu h√≥a"
   3. X√°c nh·∫≠n

8.3. QU·∫¢N L√ù PH√íNG BAN
----------------------
A. T·∫°o ph√≤ng ban m·ªõi:
   1. V√†o menu: Qu·∫£n l√Ω > Ph√≤ng ban
   2. Click "Th√™m ph√≤ng ban"
   3. ƒêi·ªÅn th√¥ng tin:
      - T√™n ph√≤ng ban
      - Ph√≤ng ban cha (n·∫øu l√† ph√≤ng con)
      - M√¥ t·∫£
   4. Click "L∆∞u"

B. Xem c∆° c·∫•u t·ªï ch·ª©c:
   1. V√†o menu: Qu·∫£n l√Ω > Ph√≤ng ban
   2. Xem d·∫°ng c√¢y (Tree view) c√°c ph√≤ng ban
   3. Click v√†o ph√≤ng ban ƒë·ªÉ xem chi ti·∫øt:
      - S·ªë nh√¢n vi√™n
      - Ph√≤ng ban con
      - Manager
      - S·ªë c·ª≠a thu·ªôc ph√≤ng ban

8.4. QU·∫¢N L√ù TH·∫∫ (CARDS)
-------------------------
A. T·∫°o th·∫ª m·ªõi:
   1. V√†o menu: Qu·∫£n l√Ω > Th·∫ª
   2. Click "Th√™m th·∫ª"
   3. ƒêi·ªÅn th√¥ng tin:
      - Card UID (m√£ th·∫ª RFID)
      - Ch·ªçn ng∆∞·ªùi d√πng
      - Ng√†y c·∫•p
      - Ng√†y h·∫øt h·∫°n (t√πy ch·ªçn)
   4. Click "L∆∞u"

B. G√°n permission cho th·∫ª:
   1. Click v√†o th·∫ª c·∫ßn g√°n permission
   2. Tab "Permissions"
   3. Click "Th√™m permission"
   4. Ch·ªçn permission t·ª´ danh s√°ch
   5. Nh·∫≠p th·ªùi gian hi·ªáu l·ª±c (valid_from, valid_until)
   6. Nh·∫≠p ghi ch√∫ (t√πy ch·ªçn)
   7. Click "G√°n"

C. K√≠ch ho·∫°t/V√¥ hi·ªáu h√≥a th·∫ª:
   1. Click v√†o th·∫ª
   2. Click "K√≠ch ho·∫°t" ho·∫∑c "V√¥ hi·ªáu h√≥a"
   3. X√°c nh·∫≠n

8.5. QU·∫¢N L√ù C·ª¨A (DOORS)
-------------------------
A. Th√™m c·ª≠a m·ªõi:
   1. V√†o menu: Qu·∫£n l√Ω > C·ª≠a
   2. Click "Th√™m c·ª≠a"
   3. ƒêi·ªÅn th√¥ng tin:
      - T√™n c·ª≠a
      - V·ªã tr√≠
      - Ph√≤ng ban (t√πy ch·ªçn)
   4. Click "L∆∞u"

B. Kh√≥a/M·ªü kh√≥a c·ª≠a:
   1. Click v√†o c·ª≠a c·∫ßn kh√≥a
   2. Click "Kh√≥a kh·∫©n c·∫•p" ho·∫∑c "M·ªü kh√≥a"
   3. X√°c nh·∫≠n

C. Xem l·ªãch s·ª≠ ra v√†o:
   1. Click v√†o c·ª≠a
   2. Tab "L·ªãch s·ª≠"
   3. Xem danh s√°ch access logs

8.6. QU·∫¢N L√ù PERMISSIONS
-------------------------
A. T·∫°o permission m·ªõi:
   1. V√†o menu: Qu·∫£n l√Ω > Permissions
   2. Click "Th√™m permission"
   3. ƒêi·ªÅn th√¥ng tin:
      - T√™n permission (VD: "Full Access", "Office Hours")
      - M√¥ t·∫£
      - Door Access Mode:
        * all: T·∫•t c·∫£ c·ª≠a
        * specific: Ch·ªâ ƒë·ªãnh c·ª≠a c·ª• th·ªÉ
        * none: Kh√¥ng c√≥ c·ª≠a n√†o
      - Time Restrictions (JSON):
        {
          "start_time": "08:00",
          "end_time": "18:00",
          "allowed_days": [1,2,3,4,5]
        }
        (1=Monday, 7=Sunday)
      - Priority: ƒê·ªô ∆∞u ti√™n (0-100)
   4. N·∫øu ch·ªçn "specific", ch·ªçn c√°c c·ª≠a ƒë∆∞·ª£c ph√©p
   5. Click "L∆∞u"

B. Th√™m/X√≥a c·ª≠a kh·ªèi permission:
   1. Click v√†o permission
   2. Tab "Doors"
   3. Click "Th√™m c·ª≠a" ho·∫∑c "X√≥a c·ª≠a"
   4. Ch·ªçn c·ª≠a v√† x√°c nh·∫≠n

8.7. QU·∫¢N L√ù KH√ÅCH (VISITOR)
-----------------------------
A. Check-in kh√°ch:
   1. V√†o menu: Kh√°ch > Check-in
   2. Click "Ch·ª•p ·∫£nh"
   3. Cho ph√©p truy c·∫≠p camera
   4. Ch·ª•p ·∫£nh kh√°ch
   5. Nh·∫≠p ghi ch√∫ (t√™n kh√°ch, m·ª•c ƒë√≠ch, g·∫∑p ai)
   6. Click "L∆∞u"

B. Check-out kh√°ch:
   1. V√†o menu: Kh√°ch > Danh s√°ch
   2. T√¨m kh√°ch c·∫ßn check-out
   3. Click "Check-out"
   4. Ch·ª•p ·∫£nh check-out
   5. X√°c nh·∫≠n

C. Xem th·ªëng k√™ kh√°ch:
   1. V√†o menu: Kh√°ch > Th·ªëng k√™
   2. Ch·ªçn kho·∫£ng th·ªùi gian (t·ª´ ng√†y - ƒë·∫øn ng√†y)
   3. Xem:
      - T·ªïng s·ªë kh√°ch
      - S·ªë kh√°ch ƒë√£ check-out
      - S·ªë kh√°ch c√≤n trong t√≤a nh√†

D. L·ªçc danh s√°ch kh√°ch:
   1. V√†o menu: Kh√°ch > Danh s√°ch
   2. Ch·ªçn b·ªô l·ªçc:
      - Ng√†y b·∫Øt ƒë·∫ßu
      - Ng√†y k·∫øt th√∫c
      - Gi·ªù b·∫Øt ƒë·∫ßu
      - Gi·ªù k·∫øt th√∫c
   3. Click "L·ªçc"

8.8. XEM L·ªäCH S·ª¨ RA V√ÄO (ACCESS LOGS)
--------------------------------------
A. Xem t·∫•t c·∫£ logs:
   1. V√†o menu: B√°o c√°o > L·ªãch s·ª≠ ra v√†o
   2. Xem danh s√°ch logs v·ªõi c√°c th√¥ng tin:
      - User
      - Card
      - Door
      - Th·ªùi gian
      - Tr·∫°ng th√°i (granted/denied)
      - L√Ω do t·ª´ ch·ªëi (n·∫øu c√≥)

B. L·ªçc logs:
   1. Ch·ªçn b·ªô l·ªçc:
      - Th·ªùi gian (t·ª´ - ƒë·∫øn)
      - User
      - Door
      - Tr·∫°ng th√°i (granted/denied)
   2. Click "L·ªçc"

C. Export logs:
   1. Click "Export"
   2. Ch·ªçn ƒë·ªãnh d·∫°ng (CSV/Excel)
   3. T·∫£i v·ªÅ

8.9. QR CODE ACCESS
--------------------
A. T·∫°o QR Code c√° nh√¢n:
   1. ƒêƒÉng nh·∫≠p v√†o h·ªá th·ªëng
   2. V√†o menu: H·ªì s∆° > QR Code
   3. H·ªá th·ªëng t·ª± ƒë·ªông t·∫°o QR code cho user
   4. Click "T·∫£i xu·ªëng" ƒë·ªÉ l∆∞u QR code

B. Qu√©t QR Code ƒë·ªÉ m·ªü c·ª≠a:
   1. V√†o menu: Qu√©t QR
   2. Click "B·∫≠t camera"
   3. Cho ph√©p truy c·∫≠p camera
   4. ƒê∆∞a QR code v√†o camera
   5. Ch·ªçn c·ª≠a c·∫ßn m·ªü
   6. H·ªá th·ªëng x√°c th·ª±c v√† m·ªü c·ª≠a

C. Xem l·ªãch s·ª≠ truy c·∫≠p b·∫±ng QR:
   1. V√†o menu: B√°o c√°o > L·ªãch s·ª≠ ra v√†o
   2. L·ªçc theo method: "QR Code"

8.10. DASHBOARD & TH·ªêNG K√ä
---------------------------
A. Dashboard Admin:
   1. Sau khi ƒëƒÉng nh·∫≠p, xem Dashboard
   2. Th·ªëng k√™ hi·ªÉn th·ªã:
      - T·ªïng s·ªë ng∆∞·ªùi d√πng
      - T·ªïng s·ªë th·∫ª ho·∫°t ƒë·ªông
      - T·ªïng s·ªë c·ª≠a
      - S·ªë l∆∞·ª£t truy c·∫≠p h√¥m nay
      - Bi·ªÉu ƒë·ªì truy c·∫≠p theo gi·ªù
      - Top users truy c·∫≠p nhi·ªÅu nh·∫•t
      - Logs g·∫ßn ƒë√¢y

B. Dashboard Security:
   1. Xem th·ªùi gian th·ª±c:
      - C·ª≠a n√†o ƒëang m·ªü/ƒë√≥ng
      - Ai v·ª´a ra/v√†o
      - C·∫£nh b√°o truy c·∫≠p b·ªã t·ª´ ch·ªëi
   2. Kh√≥a/M·ªü kh√≥a c·ª≠a kh·∫©n c·∫•p
   3. Xem camera (n·∫øu t√≠ch h·ª£p)

C. Dashboard Employee:
   1. Xem th√¥ng tin c√° nh√¢n
   2. Xem l·ªãch s·ª≠ ra v√†o c·ªßa b·∫£n th√¢n
   3. Xem QR code c√° nh√¢n
   4. C·∫≠p nh·∫≠t h·ªì s∆°

================================================================================
9. X·ª¨ L√ù L·ªñI TH∆Ø·ªúNG G·∫∂P
================================================================================

9.1. L·ªñI K·∫æT N·ªêI DATABASE
--------------------------
L·ªói: "Error: connect ECONNREFUSED 127.0.0.1:3306"

Nguy√™n nh√¢n: MySQL ch∆∞a kh·ªüi ƒë·ªông ho·∫∑c c·∫•u h√¨nh sai

Gi·∫£i ph√°p:
1. Ki·ªÉm tra MySQL ƒëang ch·∫°y:
   # Windows
   net start MySQL80

2. Ki·ªÉm tra c·∫•u h√¨nh trong file .env:
   - DB_HOST=localhost
   - DB_PORT=3306
   - DB_USER=root
   - DB_PASSWORD=ƒë√∫ng_m·∫≠t_kh·∫©u

3. Test k·∫øt n·ªëi MySQL:
   mysql -u root -p

9.2. L·ªñI PORT ƒê√É ƒê∆Ø·ª¢C S·ª¨ D·ª§NG
-------------------------------
L·ªói: "Error: listen EADDRINUSE :::5000"

Nguy√™n nh√¢n: Port 5000 ho·∫∑c 3000 ƒë√£ ƒë∆∞·ª£c ·ª©ng d·ª•ng kh√°c s·ª≠ d·ª•ng

Gi·∫£i ph√°p:
1. T√¨m process ƒëang d√πng port:
   # Windows
   netstat -ano | findstr :5000

2. Kill process:
   taskkill /PID <process_id> /F

3. Ho·∫∑c ƒë·ªïi port trong file .env (backend) ho·∫∑c package.json (frontend)

9.3. L·ªñI JWT/AUTHENTICATION
----------------------------
L·ªói: "JsonWebTokenError: invalid token"

Nguy√™n nh√¢n: Token h·∫øt h·∫°n ho·∫∑c JWT_SECRET kh√¥ng kh·ªõp

Gi·∫£i ph√°p:
1. ƒêƒÉng xu·∫•t v√† ƒëƒÉng nh·∫≠p l·∫°i
2. X√≥a localStorage:
   F12 > Application > Local Storage > Clear
3. Ki·ªÉm tra JWT_SECRET trong .env backend

9.4. L·ªñI CORS
--------------
L·ªói: "Access to XMLHttpRequest has been blocked by CORS policy"

Nguy√™n nh√¢n: Backend kh√¥ng cho ph√©p frontend truy c·∫≠p

Gi·∫£i ph√°p:
1. Ki·ªÉm tra CORS ƒë√£ ƒë∆∞·ª£c c·∫•u h√¨nh trong backend
2. ƒê·∫£m b·∫£o NEXT_PUBLIC_API_URL ƒë√∫ng trong frontend/.env.local

9.5. L·ªñI CAMERA/QR SCANNER
---------------------------
L·ªói: "NotAllowedError: Permission denied"

Nguy√™n nh√¢n: Tr√¨nh duy·ªát ch∆∞a c·∫•p quy·ªÅn camera

Gi·∫£i ph√°p:
1. Click v√†o icon kh√≥a (üîí) tr√™n thanh ƒë·ªãa ch·ªâ
2. Cho ph√©p Camera
3. Reload trang

9.6. L·ªñI NPM INSTALL
---------------------
L·ªói: "npm ERR! code ENOENT"

Nguy√™n nh√¢n: Th∆∞ m·ª•c node_modules b·ªã l·ªói

Gi·∫£i ph√°p:
1. X√≥a th∆∞ m·ª•c node_modules v√† package-lock.json:
   rmdir /s node_modules
   del package-lock.json

2. C√†i l·∫°i:
   npm install

9.7. L·ªñI BUILD FRONTEND
------------------------
L·ªói: "Error: Cannot find module 'next'"

Nguy√™n nh√¢n: Dependencies ch∆∞a ƒë∆∞·ª£c c√†i ƒë·∫∑t

Gi·∫£i ph√°p:
1. Di chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c frontend
2. Ch·∫°y: npm install
3. Ch·∫°y l·∫°i: npm run dev

9.8. L·ªñI MYSQL UTF8MB4
-----------------------
L·ªói: "Error: Unknown collation: 'utf8mb4_0900_ai_ci'"

Nguy√™n nh√¢n: MySQL version c≈© kh√¥ng h·ªó tr·ª£ utf8mb4_0900_ai_ci

Gi·∫£i ph√°p:
1. S·ª≠a file schemma.sql:
   Thay utf8mb4_0900_ai_ci b·∫±ng utf8mb4_unicode_ci

2. Import l·∫°i database

9.9. L·ªñI PERMISSION DENIED (LINUX/MAC)
---------------------------------------
L·ªói: "Error: EACCES: permission denied"

Gi·∫£i ph√°p:
1. Ch·∫°y v·ªõi sudo (Linux/Mac):
   sudo npm install

2. Ho·∫∑c s·ª≠a quy·ªÅn:
   sudo chown -R $USER:$GROUP ~/.npm
   sudo chown -R $USER:$GROUP .

================================================================================
PH·ª§ L·ª§C: C√ÅC L·ªÜNH TH∆Ø·ªúNG D√ôNG
================================================================================

Backend Commands:
-----------------
# C√†i ƒë·∫∑t dependencies
npm install

# Ch·∫°y development mode
npm run dev

# Ch·∫°y production mode
npm start

# Test database connection
node src/config/database.js

Frontend Commands:
------------------
# C√†i ƒë·∫∑t dependencies
npm install

# Ch·∫°y development mode
npm run dev

# Build production
npm run build

# Ch·∫°y production mode
npm start

# Lint code
npm run lint

Database Commands:
------------------
# ƒêƒÉng nh·∫≠p MySQL
mysql -u root -p

# T·∫°o database
CREATE DATABASE access_control;

# Import schema
mysql -u root -p access_control < schemma.sql

# Backup database
mysqldump -u root -p access_control > backup.sql

# Restore database
mysql -u root -p access_control < backup.sql

Git Commands (T√πy ch·ªçn):
------------------------
# Clone repository
git clone <repository_url>

# Pull latest changes
git pull

# Commit changes
git add .
git commit -m "Your message"
git push

================================================================================
LI√äN H·ªÜ & H·ªñ TR·ª¢
================================================================================

N·∫øu g·∫∑p v·∫•n ƒë·ªÅ trong qu√° tr√¨nh c√†i ƒë·∫∑t ho·∫∑c s·ª≠ d·ª•ng:

1. Ki·ªÉm tra l·∫°i c√°c b∆∞·ªõc trong h∆∞·ªõng d·∫´n
2. Xem ph·∫ßn "X·ª≠ l√Ω l·ªói th∆∞·ªùng g·∫∑p"
3. Ki·ªÉm tra logs trong console (F12 > Console)
4. Ki·ªÉm tra logs trong terminal backend

Th√¥ng tin h·ªá th·ªëng:
- Backend API: http://localhost:5000/api
- Frontend: http://localhost:3000
- Database: MySQL 8.0, access_control

T√°c gi·∫£: SamD
Phi√™n b·∫£n: 1.0.0
C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: 2026-01

================================================================================
K·∫æT TH√öC H∆Ø·ªöNG D·∫™N
================================================================================
